{"version":3,"file":null,"sources":["../src/component/Component.js","../src/render/index.js","../src/render/render-component.js","../src/utils/index.js","../src/component/index.js"],"sourcesContent":["import siLog from 'si-log'\nimport $ from 'jquery'\nimport * as utils from '../utils'\nconst log = siLog.create('Component.js')\n\nfunction Component () {}\nconst noop = function () {}\n/*eslint-disable*/\nlet initializing = false\nconst fnTest = /xyz/.test(function () {\n  xyz\n}) ? /\\b_super\\b/ : /.*/\n/*eslint-enable*/\nComponent.extend = function (obj) {\n  if (!obj && typeof obj !== 'object') {\n    log.warn('Parameter is null or not Object, not registered')\n    return\n  }\n  var _super = this.prototype\n  initializing = true\n  var prototype = new this()\n  initializing = false\n  // minxins处理\n  if (obj.mixins && $.isArray(obj.mixins) && obj.mixins.length > 0) {\n    $.each(obj.mixins, function (i, item) {\n      if ($.isPlainObject(item)) {\n        obj = $.extend({}, item, obj)\n      }\n    })\n    delete obj.mixins\n  }\n  obj.options = $.extend({}, _super.options, obj.options)\n  // 对象继承处理\n  for (var name in obj) {\n    prototype[name] = typeof obj[name] === 'function' &&\n    typeof _super[name] === 'function' && fnTest.test(obj[name])\n      ? (function (name, fn) {\n        return function () {\n          var tmp = this._super\n\n          this._super = _super[name]\n\n          var ret = fn.apply(this, arguments)\n          this._super = tmp\n\n          return ret\n        }\n      })(name, obj[name]) : obj[name]\n  }\n\n  function Class (targetElement, options) {\n    if (targetElement && this._create) {\n      this._create(targetElement, options)\n    }\n  }\n  Class.prototype = prototype\n  Class.prototype.constructor = Component\n  Class.extend = Component.extend\n  return Class\n}\nComponent.prototype = {\n  componentName: 'component', // 组件名称\n  options: {\n    onDestory: null,\n    onCreate: null\n  },\n  _create: function (targetElement, options) {\n    this.options = $.extend({}, this.options, options) // 存储options\n    this.targetElement = targetElement\n    $(targetElement).data(this._getDataKey(), this) // 缓存对象\n    $(this.targetElement).on('remove', this._call(function (e) {\n      if (e.target === this.targetElement) {\n        this._destory()\n      }\n    }))\n    if (this.create && $.isFunction(this.create)) this.element = this.create(targetElement, this.options)\n    if (!this.element) this.element = this.targetElement\n    this.$target = $(this.targetElement)\n    this.$element = $(this.element)\n    this._initListener(this.options) // 初始化options中的事件监听\n    this._trigger('create', this.element) // 触发create事件\n    this._init(this.element, this.options)\n  },\n  _init: function (element, options) {\n    this.init(element, options)\n  },\n  _getDataKey: function () {\n    return this.fullName\n  },\n  option: function (key, value) {\n    var options\n    if ($.isPlainObject(key)) {\n      options = key\n    } else if (value === undefined) {\n      return this.options[key]\n    } else {\n      options = {}\n      options[key] = value\n    }\n    this._setOptions(options)\n    // return this\n  },\n  _setOptions: function (options) {\n    for (var key in options) {\n      this._setOption(key, options[key])\n    }\n    return this\n  },\n  _setOption: function (key, value) {\n    this.options[key] = value\n    return this\n  },\n  create: noop,\n  init: noop,\n  refresh: noop,\n  _initListener: function (options) {\n    $.each(options, this._call(function (key, val) {\n      if (utils.startWith(key, 'on') && $.isFunction(val)) {\n        var event = utils.toLowerFirst(key.substring(2))\n        var temp = val\n        val = function () {\n          var arr = []\n          if (arguments && arguments.length > 0) {\n            arr = utils.slice(arguments, 1)\n          }\n          return temp.apply(this, arr)\n        }\n        this._on(event, val)\n      }\n    }))\n  },\n  _trigger: function (event, data) {\n    var eventName = this.componentName + '.' + event\n    $(this.targetElement).trigger(eventName, data)\n  },\n  _on: function (event, func) {\n    var eventName = this.componentName + '.' + event\n    $(this.targetElement).on(eventName, this._call(func, this.targetElement))\n  },\n  _off: function (event) {\n    var eventName = this.componentName + '.' + event\n    $(this.targetElement).off(eventName)\n  },\n  _call: function (func, ctx) {\n    if (!func || !$.isFunction(func)) return\n    var context = ctx || this\n    return function () {\n      var arr = []\n      if (arguments && arguments.length > 0) {\n        arr = utils.slice(arguments)\n      }\n      if (this !== context) arr.push(this)\n      return func.apply(context, arr)\n    }\n  },\n  _bindEvents: function (selector, event, handlder) {\n    var binds = []\n    if (arguments.length === 1) {\n      binds = arguments[0]\n    } else {\n      binds.push({\n        selector: selector,\n        event: event,\n        handlder: handlder\n      })\n    }\n    var _this = this\n    $.each(binds, function (i, item) {\n      $(_this.element).on(item.event, item.selector, _this._call(item.handler))\n    })\n  },\n  destory: noop,\n  _destory: function () {\n    this.destory()\n    this._trigger('destory')\n    $(this.element).off().removeData(this._getDataKey()).remove()\n    $(this.targetElement).off().removeData(this._getDataKey())\n  }\n}\n\nexport default Component\n","import $ from 'jquery'\nimport siLog from 'si-log'\nimport {slice} from '../utils'\n\nconst log = siLog.create('render.js')\n\n$.fn.render = function (type) {\n  var ignoreSelf = type === true\n  if (!type || ignoreSelf === true) {\n    this.each(function () {\n      $.render(this, ignoreSelf)\n    })\n  } else {\n    var args = slice(arguments, 1)\n    var func = render.proxys[type]\n    if (func && $.isFunction(func)) return func.apply(this, args)\n  }\n  return this\n}\n\nvar render = $.render = function (element, ignoreSelf) {\n  if (!ignoreSelf) $.render.doInterceptor($.render.interceptorName.ELEMENT, element)\n  $(element).children().each(function () {\n    $.render(this)\n  })\n  $.render.doInterceptor($.render.interceptorName.ELEMENT_AFTER, element)\n}\n\nrender.config = {\n  auto: true // 自动渲染\n}\nrender.interceptorName = {\n  ELEMENT: 'ELEMENT',\n  ELEMENT_AFTER: 'ELEMENT_AFTER'\n}\nvar interceptors = render.interceptors = []\n\nrender.addInterceptor = function (obj) {\n  if (obj && $.isPlainObject(obj)) interceptors.push(obj)\n}\n// 执行拦截器\nrender.doInterceptor = function (eventName) {\n  var params = Array.prototype.slice.call(arguments, 1)\n  $.each(interceptors, function (i, interceptor) {\n    if (interceptor[eventName] && $.isFunction(interceptor[eventName])) {\n      try {\n        interceptor[eventName].apply(interceptor, params)\n      } catch (e) {\n        log.error(e)\n      }\n    }\n  })\n}\n\nrender.proxys = {}\nrender.proxy = function (name, func) {\n  if (!name || !func || !$.isFunction(func)) return\n  render.proxys[name] = func\n}\n/**\n * 递归渲染的扩展\n */\nrender.plugins = {}\n// 注册一个render插件\nrender.regist = function (name) {\n  if (!name) return\n  if (render.plugins[name]) return render.plugins[name]\n  render.plugins[name] = new Plugin(name)\n  return render.plugins[name]\n}\n\nfunction Plugin (ns) {\n  this.ns = ns\n}\n\n$.extend(Plugin.prototype, {\n  proxy: function (name, func) {\n    var fullName = this.ns + '.' + name\n    render.proxy(fullName, func)\n  },\n  // 扩展名称\n  interceptor: function (obj) {\n    if (!obj || !$.isPlainObject(obj)) return\n    $.each(obj, function (key, val) {\n      render.interceptorName[this.ns.toUpperCase() + '_' + key.toUpperCase()] = this.ns.toUpperCase() + '_' + val.toUpperCase()\n    })\n    return render.interceptorName\n  },\n  addInterceptor: function (obj) {\n    render.addInterceptor(obj)\n  },\n  doInterceptor: function (eventName) {\n    var fullName = this.ns.toUpperCase() + '_' + eventName.toUpperCase()\n    render.doInterceptor(fullName)\n  },\n  config: function (obj) {\n    var config = render.config[this.ns] || (render.config[this.ns] = {})\n    return $.extend(config, obj)\n  }\n})\n\n$(function () {\n  if (render.config.auto) $('body').render() // 自动渲染\n})\n","import $ from 'jquery'\nimport {toCamelCase, toLowerFirst} from '../utils'\nimport siLog from 'si-log'\nconst render = $.render.regist('component')\nconst componentMap = $.components\nconst log = siLog.create('render-component.js')\n// 扩展配置\nconst config = render.config({\n  prefix: 'cop-',\n  exclude: 'no-render',\n  options: '{name}-options' // options属性\n})\n\nvar INTERCEPTOR = {\n  LOAD: 'LOAD',\n  BEFORE_LOAD: 'BEFORE_LOAD',\n  DESTORY: 'DESTORY'\n}\n\nrender.interceptor(INTERCEPTOR)\n// 拦截器处理\nrender.addInterceptor({\n  ELEMENT: function (element) {\n    if (!canLoadComp(element)) return\n    const componentNames = getComponentNames(element)\n    $.each(componentNames, function (i, name) {\n      name = toCamelCase(name) // 转驼峰式\n      if (!componentMap.hasOwnProperty(name)) {\n        log.warn(name + '这个组件未注册')\n        return\n      }\n      let Instance = componentMap[name]\n      let fullName = Instance.prototype.fullName || name\n      let options = getOptions(element, name)\n      $.data(element, fullName, new Instance(element, options))\n    })\n  }\n})\nrender.proxy('get', function () {\n  var data = this.data()\n  var map = {}\n  if (!data) return null\n  $.each(data, function (key, object) {\n    if (key.indexOf('component') !== -1) {\n      var name = toLowerFirst(key.substring(key.indexOf('component') + 'component'.length))\n      map[name] = object\n    }\n  })\n  return map\n})\n\nfunction canLoadComp (element) {\n  if ($(element).hasClass(config.exclude)) return false\n  var classes = $(element).attr('class')\n  return classes && classes.indexOf(config.prefix) !== -1\n}\n\nfunction getComponentNames (element) {\n  var className = $(element).attr('class')\n  var classes = className ? className.split(' ') : false\n  var componentNames = []\n  if (classes) {\n    $.each(classes, function (i, str) {\n      if (str && str.indexOf(config.prefix) !== -1) {\n        componentNames.push(str.substring(str.indexOf(config.prefix) + config.prefix.length))\n      }\n    })\n  }\n  return componentNames\n}\n\nfunction getOptions (element, name) {\n  var optionsAttr = config.options.replace(/\\{name\\}/g, name)\n  var str = $(element).attr(optionsAttr) || ''\n  try {\n    str = '{' + str + '};'\n    /*eslint-disable*/\n    const tempFunc = new Function('return ' + str)\n    /*eslint-enable*/\n    return tempFunc()\n  } catch (e) {\n    log.error('option解析出错 ：' + str, e)\n  }\n}\n","import $ from 'jquery'\n\nexport const slice = function (arr, start, end) {\n  var newArr = []\n  if (!arr) return newArr\n  if (!start) start = 0\n  if (!end || end > arr.length - 1) end = arr.length - 1\n  for (var i = 0; i < arr.length; i++) {\n    if (i < start) continue\n    if (i > end) break\n    newArr.push(arr[i])\n  }\n  return newArr\n}\n\nexport const startWith = function (str, exp) {\n  if (!str || !exp || str.length < exp.length) return\n  return str.indexOf(exp) === 0\n}\n\nexport const toLowerFirst = function (str) {\n  if (!str) return\n  var first = str.substring(0, 1)\n  return first.toLowerCase() + str.substring(1)\n}\n\nexport const toUpperFirst = function (str) {\n  if (!str) return\n  var first = str.substring(0, 1)\n  return first.toUpperCase() + str.substring(1)\n}\n\nexport const toClassStyle = function (str) {\n  if (!str) return\n  return str.replace(/([A-Z])/g, '-$1').toLowerCase()\n}\n\nexport const toCamelCase = function (str) {\n  if (!str) return\n  return str.toLowerCase().replace(/\\-(\\w)/g, function (all, letter) {\n    return letter.toUpperCase()\n  })\n}\n\nexport const arrIndexOf = function (arr, val) {\n  if (!arr || !$.isArray(arr) || arr.length === 0) return -1\n  var flag = -1\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i] === val) return i\n  }\n  return flag\n}\n","import siLog from 'si-log'\nimport $ from 'jquery'\nimport * as utils from '../utils'\nimport Component from './Component'\nconst log = siLog.create('jquery.component.js')\n\n$.cleanData = (function (orig) {\n  return function (elems) {\n    var events, elem, i\n    for (i = 0; (elem = elems[i]) !== null; i++) {\n      try {\n        // Only trigger remove when necessary to save time\n        events = $._data(elem, 'events')\n        if (events && events.remove) {\n          $(elem).triggerHandler('remove')\n        }\n        // Http://bugs.jquery.com/ticket/8235\n      } catch (e) {}\n    }\n    orig(elems)\n  }\n})($.cleanData)\n$.components = $.components || {} // 存储组件集合\n$.component = function (name) {\n  if (!name || $.trim(name) === '' || arguments.length < 2) {\n    log.error('创建组件参数有误')\n  }\n  name = utils.toCamelCase($.trim(name))\n  var parentName = null\n  var fun = null\n  if (arguments.length === 2) {\n    fun = arguments[1]\n  } else {\n    parentName = arguments[1]\n    fun = arguments[2]\n  }\n  var prop = typeof fun === 'function' ? fun() : typeof fun === 'object' ? fun : undefined // 执行方法返回render对象\n  prop.componentName = name // 组件名称\n  prop.fullName = 'component' + utils.toUpperFirst(name)\n  if (parentName && !$.components.hasOwnProperty(parentName)) {\n    log.error('没有这个父组件[' + parentName + ']')\n    return\n  }\n  if ($.components.hasOwnProperty(name)) {\n    log.warn('[' + name + ']这个组件已经被注册了！')\n  }\n  var componentClass = parentName ? $.components[parentName].extend(prop) : Component.extend(prop)\n  $.components[name] = componentClass\n  $.component.bridge(name, componentClass)\n  return componentClass\n}\n$.component.bridge = function (name, Obj) {\n  var fullName = Obj.prototype.fullName || name\n  var pluginName = name\n  if ($.fn[pluginName]) {\n    log.warn('无法注册为jquery插件,这个插件已经存在')\n    return\n  }\n  $.fn[pluginName] = function (options) {\n    var isMethodCall = typeof options === 'string'\n    var args = Array.prototype.slice.call(arguments, 1)\n    var returnValue = this\n\n    if (isMethodCall) {\n      this.each(function () {\n        var methodValue\n        var instance = $.data(this, fullName)\n\n        if (options === 'instance') {\n          returnValue = instance\n          return false\n        }\n\n        if (!instance) {\n          return log.error('cannot call methods on ' + name + ' prior to initialization; ' +\n            'attempted to call method \"' + options + '\"')\n        }\n\n        if (!$.isFunction(instance[options]) || options.charAt(0) === '_') {\n          return log.error('no such method \"' + options + '\" for ' + name + ' component instance')\n        }\n\n        methodValue = instance[options].apply(instance, args)\n\n        if (methodValue !== instance && methodValue !== undefined) {\n          returnValue = methodValue && methodValue.jquery ? returnValue.pushStack(methodValue.get()) : methodValue\n          return false\n        }\n      })\n    } else {\n      this.each(function () {\n        var instance = $.data(this, fullName)\n        if (instance) {\n          if (instance.refresh) {\n            instance.refresh(options)\n          }\n        } else {\n          $.data(this, fullName, new Obj(this, options))\n        }\n      })\n    }\n    return returnValue\n  }\n}\n"],"names":["Component","Plugin","ns","canLoadComp","element","$","hasClass","config","exclude","classes","attr","indexOf","prefix","getComponentNames","className","split","componentNames","each","i","str","push","substring","length","getOptions","name","optionsAttr","options","replace","tempFunc","Function","e","error","slice","arr","start","end","newArr","startWith","exp","toLowerFirst","first","toLowerCase","toUpperFirst","toUpperCase","toCamelCase","all","letter","log","siLog","create","noop","initializing","fnTest","test","extend","obj","Class","targetElement","this","_create","warn","_super","prototype","mixins","isArray","item","isPlainObject","fn","tmp","ret","apply","arguments","constructor","data","_getDataKey","on","_call","target","_destory","isFunction","$target","$element","_initListener","_trigger","_init","init","fullName","key","value","undefined","_setOptions","_setOption","val","utils","event","temp","_on","eventName","componentName","trigger","func","off","ctx","context","selector","handlder","binds","_this","handler","destory","removeData","remove","cleanData","orig","elems","events","elem","_data","triggerHandler","components","component","trim","parentName","fun","prop","hasOwnProperty","componentClass","bridge","Obj","pluginName","isMethodCall","args","Array","call","returnValue","methodValue","instance","charAt","jquery","pushStack","get","refresh","render","type","ignoreSelf","proxys","doInterceptor","interceptorName","ELEMENT","children","ELEMENT_AFTER","interceptors","addInterceptor","params","interceptor","proxy","plugins","regist","auto","componentMap","INTERCEPTOR","Instance","map","object"],"mappings":"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"}