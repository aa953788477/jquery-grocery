!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery"),require("si-log")):"function"==typeof define&&define.amd?define(["jquery","si-log"],e):t.jQuery=e(t.$,t.siLog)}(this,function(t,e){"use strict";function n(){}function r(t){this.ns=t}function i(e){if(t(e).hasClass(N.exclude))return!1;var n=t(e).attr("class");return n&&n.indexOf(N.prefix)!==-1}function o(e){var n=t(e).attr("class"),r=!!n&&n.split(" "),i=[];return r&&t.each(r,function(t,e){e&&e.indexOf(N.prefix)!==-1&&i.push(e.substring(e.indexOf(N.prefix)+N.prefix.length))}),i}function s(e,n){var r=N.options.replace(/\{name\}/g,n),i=t(e).attr(r)||"";try{i="{"+i+"};";var o=new Function("return "+i);return o()}catch(t){O.error("option解析出错 ："+i,t)}}t="default"in t?t.default:t,e="default"in e?e.default:e;var a=function(t,e,n){var r=[];if(!t)return r;e||(e=0),(!n||n>t.length-1)&&(n=t.length-1);for(var i=0;i<t.length;i++)if(!(i<e)){if(i>n)break;r.push(t[i])}return r},c=function(t,e){if(t&&e&&!(t.length<e.length))return 0===t.indexOf(e)},u=function(t){if(t){var e=t.substring(0,1);return e.toLowerCase()+t.substring(1)}},f=function(t){if(t){var e=t.substring(0,1);return e.toUpperCase()+t.substring(1)}},p=function(t){if(t)return t.toLowerCase().replace(/\-(\w)/g,function(t,e){return e.toUpperCase()})},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},l=e.create("Component.js"),d=function(){},m=!1,g=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;n.extend=function(e){function r(t,e){t&&this._create&&this._create(t,e)}if(!e&&"object"!==("undefined"==typeof e?"undefined":h(e)))return void l.warn("Parameter is null or not Object, not registered");var i=this.prototype;m=!0;var o=new this;m=!1,e.mixins&&t.isArray(e.mixins)&&e.mixins.length>0&&(t.each(e.mixins,function(n,r){t.isPlainObject(r)&&(e=t.extend({},r,e))}),delete e.mixins),e.options=t.extend({},i.options,e.options);for(var s in e)o[s]="function"==typeof e[s]&&"function"==typeof i[s]&&g.test(e[s])?function(t,e){return function(){var n=this._super;this._super=i[t];var r=e.apply(this,arguments);return this._super=n,r}}(s,e[s]):e[s];return r.prototype=o,r.prototype.constructor=n,r.extend=n.extend,r},n.prototype={componentName:"component",options:{onDestory:null,onCreate:null},_create:function(e,n){this.options=t.extend({},this.options,n),this.targetElement=e,t(e).data(this._getDataKey(),this),t(this.targetElement).on("remove",this._call(function(t){t.target===this.targetElement&&this._destory()})),this.create&&t.isFunction(this.create)&&(this.element=this.create(e,this.options)),this.element||(this.element=this.targetElement),this.$target=t(this.targetElement),this.$element=t(this.element),this._initListener(this.options),this._trigger("create",this.element),this._init(this.element,this.options)},_init:function(t,e){this.init(t,e)},_getDataKey:function(){return this.fullName},option:function(e,n){var r;if(t.isPlainObject(e))r=e;else{if(void 0===n)return this.options[e];r={},r[e]=n}this._setOptions(r)},_setOptions:function(t){for(var e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,this},create:d,init:d,refresh:d,_initListener:function(e){t.each(e,this._call(function(e,n){if(c(e,"on")&&t.isFunction(n)){var r=u(e.substring(2)),i=n;n=function(){var t=[];return arguments&&arguments.length>0&&(t=a(arguments,1)),i.apply(this,t)},this._on(r,n)}}))},_trigger:function(e,n){var r=this.componentName+"."+e;t(this.targetElement).trigger(r,n)},_on:function(e,n){var r=this.componentName+"."+e;t(this.targetElement).on(r,this._call(n,this.targetElement))},_off:function(e){var n=this.componentName+"."+e;t(this.targetElement).off(n)},_call:function(e,n){if(e&&t.isFunction(e)){var r=n||this;return function(){var t=[];return arguments&&arguments.length>0&&(t=a(arguments)),this!==r&&t.push(this),e.apply(r,t)}}},_bindEvents:function(e,n,r){var i=[];1===arguments.length?i=arguments[0]:i.push({selector:e,event:n,handlder:r});var o=this;t.each(i,function(e,n){t(o.element).on(n.event,n.selector,o._call(n.handler))})},destory:d,_destory:function(){this.destory(),this._trigger("destory"),t(this.element).off().removeData(this._getDataKey()).remove(),t(this.targetElement).off().removeData(this._getDataKey())}};var y=e.create("jquery.component.js");t.cleanData=function(e){return function(n){var r,i,o;for(o=0;null!==(i=n[o]);o++)try{r=t._data(i,"events"),r&&r.remove&&t(i).triggerHandler("remove")}catch(t){}e(n)}}(t.cleanData),t.components=t.components||{},t.component=function(e){(!e||""===t.trim(e)||arguments.length<2)&&y.error("创建组件参数有误"),e=p(t.trim(e));var r=null,i=null;2===arguments.length?i=arguments[1]:(r=arguments[1],i=arguments[2]);var o="function"==typeof i?i():"object"===("undefined"==typeof i?"undefined":h(i))?i:void 0;if(o.componentName=e,o.fullName="component"+f(e),r&&!t.components.hasOwnProperty(r))return void y.error("没有这个父组件["+r+"]");t.components.hasOwnProperty(e)&&y.warn("["+e+"]这个组件已经被注册了！");var s=r?t.components[r].extend(o):n.extend(o);return t.components[e]=s,t.component.bridge(e,s),s},t.component.bridge=function(e,n){var r=n.prototype.fullName||e,i=e;return t.fn[i]?void y.warn("无法注册为jquery插件,这个插件已经存在"):void(t.fn[i]=function(i){var o="string"==typeof i,s=Array.prototype.slice.call(arguments,1),a=this;return o?this.each(function(){var n,o=t.data(this,r);return"instance"===i?(a=o,!1):o?t.isFunction(o[i])&&"_"!==i.charAt(0)?(n=o[i].apply(o,s),n!==o&&void 0!==n?(a=n&&n.jquery?a.pushStack(n.get()):n,!1):void 0):y.error('no such method "'+i+'" for '+e+" component instance"):y.error("cannot call methods on "+e+' prior to initialization; attempted to call method "'+i+'"')}):this.each(function(){var e=t.data(this,r);e?e.refresh&&e.refresh(i):t.data(this,r,new n(this,i))}),a})};var v=e.create("render.js");t.fn.render=function(e){var n=e===!0;if(e&&n!==!0){var r=a(arguments,1),i=_.proxys[e];if(i&&t.isFunction(i))return i.apply(this,r)}else this.each(function(){t.render(this,n)});return this};var _=t.render=function(e,n){n||t.render.doInterceptor(t.render.interceptorName.ELEMENT,e),t(e).children().each(function(){t.render(this)}),t.render.doInterceptor(t.render.interceptorName.ELEMENT_AFTER,e)};_.config={auto:!0},_.interceptorName={ELEMENT:"ELEMENT",ELEMENT_AFTER:"ELEMENT_AFTER"};var E=_.interceptors=[];_.addInterceptor=function(e){e&&t.isPlainObject(e)&&E.push(e)},_.doInterceptor=function(e){var n=Array.prototype.slice.call(arguments,1);t.each(E,function(r,i){if(i[e]&&t.isFunction(i[e]))try{i[e].apply(i,n)}catch(t){v.error(t)}})},_.proxys={},_.proxy=function(e,n){e&&n&&t.isFunction(n)&&(_.proxys[e]=n)},_.plugins={},_.regist=function(t){if(t)return _.plugins[t]?_.plugins[t]:(_.plugins[t]=new r(t),_.plugins[t])},t.extend(r.prototype,{proxy:function(t,e){var n=this.ns+"."+t;_.proxy(n,e)},interceptor:function(e){if(e&&t.isPlainObject(e))return t.each(e,function(t,e){_.interceptorName[this.ns.toUpperCase()+"_"+t.toUpperCase()]=this.ns.toUpperCase()+"_"+e.toUpperCase()}),_.interceptorName},addInterceptor:function(t){_.addInterceptor(t)},doInterceptor:function(t){var e=this.ns.toUpperCase()+"_"+t.toUpperCase();_.doInterceptor(e)},config:function e(n){var e=_.config[this.ns]||(_.config[this.ns]={});return t.extend(e,n)}}),t(function(){_.config.auto&&t("body").render()});var x=t.render.regist("component"),b=t.components,O=e.create("render-component.js"),N=x.config({prefix:"cop-",exclude:"no-render",options:"{name}-options"}),j={LOAD:"LOAD",BEFORE_LOAD:"BEFORE_LOAD",DESTORY:"DESTORY"};return x.interceptor(j),x.addInterceptor({ELEMENT:function(e){if(i(e)){var n=o(e);t.each(n,function(n,r){if(r=p(r),!b.hasOwnProperty(r))return void O.warn(r+"这个组件未注册");var i=b[r],o=i.prototype.fullName||r,a=s(e,r);t.data(e,o,new i(e,a))})}}}),x.proxy("get",function(){var e=this.data(),n={};return e?(t.each(e,function(t,e){if(t.indexOf("component")!==-1){var r=u(t.substring(t.indexOf("component")+"component".length));n[r]=e}}),n):null}),t});
//# sourceMappingURL=jquery.component.min.js.map
